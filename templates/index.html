<!DOCTYPE html>
<html>
<head><title>Aspira MVP</title></head>
<body>
    <h1>Aspira Visa Investment Planner</h1>
    <form method="post">
        <label>Current Visa: <input type="text" name="current_visa" required></label><br>
        <label>Expiration Date (YYYY-MM-DD): <input type="text" name="expiration_date" required></label><br>
        <label>Pending Applications (comma-separated): <input type="text" name="pending_applications" required></label><br>
        <label>Expected Costs ($): <input type="number" name="expected_costs" step="0.01" required></label><br>
        <label>Investable Cash ($): <input type="number" name="investable_cash" step="0.01" required></label><br>
        <label>Monthly Contributions ($): <input type="number" name="monthly_contributions" step="0.01" required></label><br>
        <button type="submit">Submit</button>
    </form>
    {% if gemini_portfolio %}
        <h2>Gemini Strategy</h2>
        <p>Projected Value: ${{ gemini_fv }}</p>
        {% for ticker, price, target, shares in gemini_portfolio %}
            <p>{{ ticker }}: Target ${{ target }}, Shares {{ shares }}</p>
        {% endfor %}
        <h2>Open AI Strategy</h2>
        <p>Projected Value: ${{ openai_fv }}</p>
        {% for ticker, price, target, shares in openai_portfolio %}
            <p>{{ ticker }}: Target ${{ target }}, Shares {{ shares }}</p>
        {% endfor %}
        <canvas id="growthChart"></canvas>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
            const ctx = document.getElementById('growthChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['0', '12', '24'],
                    datasets: [{
                        label: 'Gemini Strategy',
                        data: [12000, 18000, gemini_fv],
                        borderColor: 'blue',
                        fill: false
                    }, {
                        label: 'Open AI Strategy',
                        data: [12000, 19000, openai_fv],
                        borderColor: 'red',
                        fill: false
                    }, {
                        label: 'SPY Benchmark',
                        data: [12000, 16000, 18000], // Example SPY growth
                        borderColor: 'green',
                        fill: false
                    }]
                },
                options: { scales: { y: { beginAtZero: true } } }
            });
        </script>
    {% endif %}
</body>
</html>